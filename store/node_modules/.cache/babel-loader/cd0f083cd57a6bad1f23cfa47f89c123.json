{"ast":null,"code":"var _jsxFileName = \"/Users/jamie/Documents/bookstore/store/src/TopBar.js\";\nimport React, { useState, useEffect } from 'react';\nimport './TopBar.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars, faShoppingCart, faSearch, faWindowClose } from '@fortawesome/free-solid-svg-icons';\nimport Selection from './img/Selection.png';\nimport axios from 'axios';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport { DropdownButton, SplitButton, Dropdown, ButtonGroup } from 'react-bootstrap';\n\nconst TopBar = props => {\n  const [isNavOpen, setIsNavOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const [apiKey, setApiKey] = useState(\"AIzaSyCnGiOUTd7RBgYr-c-_AzYRmg3fQjaVBO8\");\n  const [books, setBooks] = useState([]);\n  const [home, setHome] = useState();\n  const [name, setName] = useState('');\n  const [preferOne, setPreferOne] = useState('');\n  const [preferTwo, setPreferTwo] = useState('');\n  const [preferThree, setPreferThree] = useState('');\n  let history = useHistory();\n\n  const go = () => {\n    history.push('/browse');\n    window.location.reload();\n  };\n\n  const getUser = async () => {\n    try {\n      const res = await fetch(\"/choices\", {\n        method: \"GET\",\n        headers: {\n          jwt_token: localStorage.token\n        }\n      });\n      const parseRes = await res.json();\n      console.log(parseRes[0]);\n      let userName = parseRes[0].user_name;\n      let num = userName.indexOf(\" \");\n\n      if (num < 0) {\n        setName(parseRes[0].user_name);\n      } else {\n        var firstName = userName.slice(0, num);\n        setName(firstName);\n      }\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    getUser();\n\n    if (!localStorage.prefOne) {\n      setPreferOne('History');\n      localStorage.setItem('prefOne', 'History');\n    } else {\n      setPreferOne(localStorage.prefOne);\n    }\n\n    if (!localStorage.prefTwo) {\n      setPreferTwo('Fiction');\n      localStorage.setItem('prefTwo', 'Fiction');\n    } else {\n      setPreferTwo(localStorage.prefTwo);\n    }\n\n    if (!localStorage.prefThree) {\n      setPreferThree('Politics');\n      localStorage.setItem('prefThree', 'Politics');\n    } else {\n      setPreferThree(localStorage.prefThree);\n    }\n  }, []);\n  useEffect(() => {\n    setHome(props.homepage);\n  }, []);\n\n  const send = e => {\n    history.push('/filter');\n\n    if (props.onFilter) {\n      window.location.reload();\n    }\n  };\n\n  const changeHandler = e => {\n    setSearch(e.target.value);\n    localStorage.setItem('search', e.target.value);\n  };\n\n  const openSlideMenu = () => {\n    setIsNavOpen(!isNavOpen);\n  };\n\n  const closeSlideMenu = () => {\n    setIsNavOpen(false);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const prefOne = async e => {\n    e.preventDefault();\n    console.log(e.target.id);\n    setPreferOne(e.target.id);\n    localStorage.setItem('prefOne', e.target.id);\n    const myHeaders = new Headers();\n    myHeaders.append(\"jwt_token\", localStorage.token);\n    axios.post('/choices', {\n      choice: e.target.id\n    }, {\n      headers: {\n        jwt_token: localStorage.token\n      }\n    }).then(res => {\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const prefTwo = e => {\n    console.log(e.target.id);\n    setPreferTwo(e.target.id);\n    localStorage.setItem('prefTwo', e.target.id);\n    const myHeaders = new Headers();\n    myHeaders.append(\"jwt_token\", localStorage.token);\n    axios.post('/choices', {\n      choice: e.target.id\n    }, {\n      headers: {\n        jwt_token: localStorage.token\n      }\n    }).then(res => {\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const prefThree = e => {\n    console.log(e.target.id);\n    setPreferThree(e.target.id);\n    localStorage.setItem('prefThree', e.target.id);\n    const myHeaders = new Headers();\n    myHeaders.append(\"jwt_token\", localStorage.token);\n    axios.post('/choices', {\n      choice: e.target.id\n    }, {\n      headers: {\n        jwt_token: localStorage.token\n      }\n    }).then(res => {\n      console.log(res);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-bar-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav-blur-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav-blur-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: isNavOpen === true ? \"slide-nav\" : \"close-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/signIn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"a\", {\n    onClick: logout,\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, \"Sign Out\"))), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: closeSlideMenu,\n    className: \"blur\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-items-one\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    onClick: openSlideMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"fa fa-bars\",\n    icon: faBars,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"store-logo\",\n    src: Selection,\n    alt: \"store-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 29\n    }\n  })), name.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#m\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 30\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 31\n    }\n  }, \"Signup\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 12\n    }\n  }, \"Hey there  \", name, \"!\"), /*#__PURE__*/React.createElement(\"a\", {\n    onClick: logout,\n    href: \"#m\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 10\n    }\n  }, \"Logout\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-items-two\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"choices\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"choice-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, ['Secondary'].map(variant => /*#__PURE__*/React.createElement(SplitButton, {\n    key: variant,\n    id: `dropdown-split-variants-${variant}`,\n    variant: variant.toLowerCase(),\n    title: preferOne.length === 0 ? '1st Preference' : preferOne,\n    size: \"sm\",\n    onClick: go,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefOne,\n    id: \"Fiction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, \"Fiction\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefOne,\n    id: \"History\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }, \"History\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefOne,\n    id: \"Science\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }, \"Science\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefOne,\n    id: \"Fantasy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, \"Fantasy\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefOne,\n    id: \"Romance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, \"Romance\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefOne,\n    id: \"Politics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, \"Politics\"), /*#__PURE__*/React.createElement(Dropdown.Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, \"Separated link\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"choice-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }\n  }, ['Secondary'].map(variant => /*#__PURE__*/React.createElement(SplitButton, {\n    key: variant,\n    id: `dropdown-split-variants-${variant}`,\n    variant: variant.toLowerCase(),\n    title: preferTwo.length === 0 ? '2nd Preference' : preferTwo,\n    size: \"sm\",\n    onClick: go,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefTwo,\n    id: \"Fiction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, \"Fiction\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefTwo,\n    id: \"History\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  }, \"History\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefTwo,\n    id: \"Science\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }\n  }, \"Science\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefTwo,\n    id: \"Fantasy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, \"Fantasy\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefTwo,\n    id: \"Romance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }\n  }, \"Romance\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefTwo,\n    id: \"Politics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, \"Politics\"), /*#__PURE__*/React.createElement(Dropdown.Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, \"Separated link\")))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }, ['Secondary'].map(variant => /*#__PURE__*/React.createElement(SplitButton, {\n    key: variant,\n    id: `dropdown-split-variants-${variant}`,\n    variant: variant.toLowerCase(),\n    title: preferThree.length === 0 ? '3rd Preference' : preferThree,\n    size: \"sm\",\n    onClick: go,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefThree,\n    id: \"Fiction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, \"Fiction\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefThree,\n    id: \"History\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  }, \"History\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefThree,\n    id: \"Science\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 13\n    }\n  }, \"Science\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefThree,\n    id: \"Fantasy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 13\n    }\n  }, \"Fantasy\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefThree,\n    id: \"Romance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, \"Romance\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"3\",\n    onClick: prefThree,\n    id: \"Politics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 13\n    }\n  }, \"Politics\"), /*#__PURE__*/React.createElement(Dropdown.Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 13\n    }\n  }, \"Separated link\"))))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: send,\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: changeHandler,\n    className: \"input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/filtered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: send,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 31\n    }\n  }, \"GO\"))))));\n};\n\nexport default TopBar;","map":{"version":3,"sources":["/Users/jamie/Documents/bookstore/store/src/TopBar.js"],"names":["React","useState","useEffect","FontAwesomeIcon","faBars","faShoppingCart","faSearch","faWindowClose","Selection","axios","NavLink","useHistory","DropdownButton","SplitButton","Dropdown","ButtonGroup","TopBar","props","isNavOpen","setIsNavOpen","search","setSearch","apiKey","setApiKey","books","setBooks","home","setHome","name","setName","preferOne","setPreferOne","preferTwo","setPreferTwo","preferThree","setPreferThree","history","go","push","window","location","reload","getUser","res","fetch","method","headers","jwt_token","localStorage","token","parseRes","json","console","log","userName","user_name","num","indexOf","firstName","slice","err","error","message","prefOne","setItem","prefTwo","prefThree","homepage","send","e","onFilter","changeHandler","target","value","openSlideMenu","closeSlideMenu","logout","removeItem","preventDefault","id","myHeaders","Headers","append","post","choice","then","catch","length","map","variant","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './TopBar.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBars, faShoppingCart, faSearch, faWindowClose } from '@fortawesome/free-solid-svg-icons';\nimport Selection from './img/Selection.png';\nimport axios from 'axios';\nimport {NavLink, useHistory} from 'react-router-dom';\nimport {DropdownButton, SplitButton, Dropdown, ButtonGroup} from 'react-bootstrap';\n\nconst TopBar = (props) => { \n  const [isNavOpen, setIsNavOpen] = useState(false);\n  const [search, setSearch] = useState('');\n  const [apiKey, setApiKey] = useState(\"AIzaSyCnGiOUTd7RBgYr-c-_AzYRmg3fQjaVBO8\");\n  const [books, setBooks] = useState([]);\n  const [home, setHome] = useState();\n  const [name, setName] = useState('');\n  const [preferOne, setPreferOne] = useState('');\n  const [preferTwo, setPreferTwo] = useState('');\n  const [preferThree, setPreferThree] = useState('');\n\n  let history = useHistory();\n\n  const go = () => {\n    history.push('/browse');\n    window.location.reload();\n  }\n  \n\n  const getUser = async () => {\n    try {\n      const res = await fetch(\"/choices\", {\n        method: \"GET\",\n        headers: { jwt_token: localStorage.token }\n      });\n\n      const parseRes = await res.json();\n      console.log(parseRes[0])\n      let userName = parseRes[0].user_name;\n      let num = userName.indexOf(\" \");\n      if (num < 0) {\n        setName(parseRes[0].user_name)\n      } else {\n      var firstName = userName.slice(0, num);\n\n      setName(firstName)\n}\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    getUser();\n    if (!localStorage.prefOne) {\n      setPreferOne('History')\n      localStorage.setItem('prefOne', 'History');\n    } else {\n      setPreferOne(localStorage.prefOne)\n    }\n    if (!localStorage.prefTwo) {\n      setPreferTwo('Fiction')\n      localStorage.setItem('prefTwo', 'Fiction');\n\n    } else {\n        setPreferTwo(localStorage.prefTwo)\n    }\n    if (!localStorage.prefThree) {\n      setPreferThree('Politics')\n      localStorage.setItem('prefThree', 'Politics');\n\n    } else {\n        setPreferThree(localStorage.prefThree)\n\n    }\n\n  }, []);\n\n\n\n  useEffect(() => {\n    setHome(props.homepage)\n  }, [])\n\n  const send = (e) => {\n    history.push('/filter')\n    if (props.onFilter) {\n      window.location.reload();\n    }\n  }\n\n\n  const changeHandler = (e) => {\n    setSearch(e.target.value)\n    localStorage.setItem('search', e.target.value)\n  }\n  \n\n  const openSlideMenu = () => {\n    setIsNavOpen(!isNavOpen);\n  }\n\n  const closeSlideMenu = () => {\n    setIsNavOpen(false);\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"token\")\n    window.location.reload();\n  }\n\n  const prefOne = async e => {\n    e.preventDefault();\n    console.log(e.target.id)\n    setPreferOne(e.target.id)\n    localStorage.setItem('prefOne', e.target.id)\n    const myHeaders = new Headers();\n    myHeaders.append(\"jwt_token\", localStorage.token);\n        axios.post('/choices', {choice: e.target.id}, {headers: {jwt_token: localStorage.token}\n      })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n  };\n\n  \n\n\n  const prefTwo = e => {\n    console.log(e.target.id)\n    setPreferTwo(e.target.id)\n    localStorage.setItem('prefTwo', e.target.id)\n    const myHeaders = new Headers();\n    myHeaders.append(\"jwt_token\", localStorage.token);\n        axios.post('/choices', {choice: e.target.id}, {headers: {jwt_token: localStorage.token}\n      })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n  }\n\n  const prefThree = e => {\n    console.log(e.target.id)\n    setPreferThree(e.target.id)\n    localStorage.setItem('prefThree', e.target.id)\n    const myHeaders = new Headers();\n    myHeaders.append(\"jwt_token\", localStorage.token);\n        axios.post('/choices', {choice: e.target.id}, {headers: {jwt_token: localStorage.token}\n      })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n  }\n\n  \n  return (\n    <div>\n    <div className='top-bar-container'>\n      <div className=\"nav-blur-container\">\n      <div className=\"nav-blur-flex\">\n      <ul className={isNavOpen === true ? \"slide-nav\" : \"close-nav\"}>\n        <div className='nav-list'>\n          <a href=\"/login\">Log In</a>\n          <a href=\"/signIn\">Sign Up</a>\n          <a onClick={logout} href=\"#\">Sign Out</a>\n        </div>\n      </ul>\n      <div onClick={closeSlideMenu} className=\"blur\">\n      </div>\n</div>\n\n      </div>\n      <div className='top-items-one'>\n      <a href=\"#\" onClick={openSlideMenu}>\n            <FontAwesomeIcon className=\"fa fa-bars\" icon={faBars} />\n        </a>\n\n        <NavLink to='/home'><img className='store-logo' src={Selection} alt='store-logo' /></NavLink>\n        { name.length === 0 ?\n        <div className='login'>\n        <NavLink to='/login'><a href=\"#m\">\n            Login\n        </a></NavLink>\n        <NavLink to='/signin'><a href=\"#\">\n            Signup\n        </a></NavLink>\n        </div>\n         : <div className='login'>\n           <p>Hey there  { name}!</p>\n         <a onClick={logout} href=\"#m\">\n            Logout\n        </a>\n        </div> }\n      </div>\n        \n      <div className='top-items-two'>\n        <div  className='choices'>\n        <div className='choice-button'>\n          {['Secondary'].map(\n        (variant) => (\n          <SplitButton\n            key={variant}\n            id={`dropdown-split-variants-${variant}`}\n            variant={variant.toLowerCase()}\n            title={preferOne.length === 0 ? '1st Preference' : preferOne}\n            size='sm'\n            onClick={go}\n          >\n            <Dropdown.Item eventKey=\"3\" onClick={prefOne}  id='Fiction' >\n              Fiction\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefOne}  id='History'  >\n              History\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefOne}  id='Science'  >\n              Science\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefOne}  id='Fantasy'  >\n              Fantasy\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefOne}  id='Romance'  >\n              Romance\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefOne}  id='Politics'  >\n              Politics\n            </Dropdown.Item>\n\n            <Dropdown.Divider />\n            <Dropdown.Item eventKey=\"4\">Separated link</Dropdown.Item>\n          </SplitButton>\n        ),\n      )}\n      </div>   \n      <div className='choice-button'>\n          {['Secondary'].map(\n        (variant) => (\n          <SplitButton\n            key={variant}\n            id={`dropdown-split-variants-${variant}`}\n            variant={variant.toLowerCase()}\n            title={preferTwo.length === 0 ? '2nd Preference' : preferTwo}\n            size='sm'\n            onClick={go}\n\n          >\n            <Dropdown.Item eventKey=\"3\" onClick={prefTwo}  id='Fiction' >\n              Fiction\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefTwo}  id='History'  >\n              History\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefTwo}  id='Science'  >\n              Science\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefTwo}  id='Fantasy'  >\n              Fantasy\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefTwo}  id='Romance'  >\n              Romance\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefTwo}  id='Politics'  >\n              Politics\n            </Dropdown.Item>\n            <Dropdown.Divider />\n            <Dropdown.Item eventKey=\"4\">Separated link</Dropdown.Item>\n          </SplitButton>\n        ),\n      )}\n      </div>        \n      <div>\n          {['Secondary'].map(\n        (variant) => (\n          <SplitButton\n            key={variant}\n            id={`dropdown-split-variants-${variant}`}\n            variant={variant.toLowerCase()}\n            title={preferThree.length === 0 ? '3rd Preference' : preferThree}\n            size='sm'\n            onClick={go}\n\n          >\n            <Dropdown.Item eventKey=\"3\" onClick={prefThree}  id='Fiction' >\n              Fiction\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefThree}  id='History'  >\n              History\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefThree}  id='Science'  >\n              Science\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefThree}  id='Fantasy'  >\n              Fantasy\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefThree}  id='Romance'  >\n              Romance\n            </Dropdown.Item>\n            <Dropdown.Item eventKey=\"3\" onClick={prefThree}  id='Politics'  >\n              Politics\n            </Dropdown.Item>\n            <Dropdown.Divider />\n            <Dropdown.Item eventKey=\"4\">Separated link</Dropdown.Item>\n          </SplitButton>\n        ),\n      )}\n      </div>\n      </div>        \n     \n  <form onSubmit={send} className='form'>\n      <input onChange={changeHandler} className='input' />\n      <NavLink to='/filtered'><button type='submit' onClick={send}>GO</button></NavLink>\n      </form>\n      </div>\n\n      </div>\n\n\n    </div>\n  )\n}\n\nexport default TopBar;\n"]},"metadata":{},"sourceType":"module"}